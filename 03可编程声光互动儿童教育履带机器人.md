## 可编程声光互动儿童教育履带机器人

### 研究背景与思维过程

#### 研究背景

机器人一直是儿童教育领域的一个热门分支。我们通过复刻『机器人总动员』这部迪士尼经典电影的主角 - Wall·E(瓦力)的过程，实现“梦想照进现实”的过程，让孩子们体验“从电视到现实”，鼓励他们把一些存在于虚拟世界，存在于自己的想象中的东西，在现实世界中做出来

#### 提出问题与研究解决方案

1. 如何对电影里边的角色进行三维建模？

   根据电影测量清楚轮廓的大致比例，然后根据我们自己选择的电子元器件的尺寸，确定身体的一个边的长度。根据轮廓的比例来还原其他部分的大小

2. 如何规划瓦力的功能？

   大致分为机械部分、输入端和输出端

   - 机械部分：手臂、轮子、脖子

   - 输入端：开关、蓝牙、超声波距离传感器

   - 输出端：蜂鸣器、Led点阵

#### 设计思路

- 通过Arduino Nano驱动5个舵机，连接2个手臂、1个脖子、2个脚，组成机械部分
- 超声波距离传感器，可以实现避障
- Led点阵可以显示自定义图形，蜂鸣器可以发出声音，加起来可以表达瓦力的心情
- 瓦力的所有动作均可以通过编程来实现，可以做很多有意思的事情，例如跳舞
- 蓝牙模块能够实现手机无线控制



### 原理分析

#### 硬件原理介绍

1. Arduino Nano板+扩展板

   具有较高的集成度，简单易用，还有高性能、低成本、低功耗等优点，非常适合用于嵌入式设备

   ![](http://ww4.sinaimg.cn/large/006tNc79ly1g4xwlez5ftj311e0n41kx.jpg)

2. PCA9685十六路舵机驱动模块

   ![](http://ww4.sinaimg.cn/large/006tNc79ly1g4xx6gm7hnj30xc0loqto.jpg)

3. 舵机

   ![](http://ww2.sinaimg.cn/large/006tNc79ly1g4xx8f3uf8j312e0i6kd0.jpg)

4. 超声波距离传感器

   ![](http://ww1.sinaimg.cn/large/006tNc79ly1g4xxazg6onj30yc0jw4qp.jpg)


#### 接线对照表

| nano扩展板 | 左脚舵机 | 右脚舵机 | 舵机板        | 蜂鸣器 | 点阵模块 | 电池盒 | 超声波传感器 |
| ---------- | -------- | -------- | ------------- | ------ | -------- | ------ | ------------ |
| 10         |          |          |               |        | CS       |        |              |
| 11         |          |          |               |        | CLK      |        |              |
| 12         |          |          |               |        | DIN      |        |              |
| 11G        |          |          |               |        | VCC      |        |              |
| 11V        |          |          |               |        | GND      |        |              |
| SCL        |          |          | SCL           |        |          |        |              |
| SDA        |          |          | SDA           |        |          |        |              |
| A0         |          |          |               | I/O    |          |        |              |
| A0G        |          |          |               | VCC    |          |        |              |
| A0V        |          |          |               | GND    |          |        |              |
| 8          |          |          |               |        |          |        | Trig         |
| 9          |          |          |               |        |          |        | Echo         |
| 8V         |          |          |               |        |          |        | Vcc          |
| 8G         |          |          |               |        |          |        | GND          |
|            | 一排线   |          | 8             |        |          |        |              |
|            |          | 一排线   | 6             |        |          |        |              |
|            |          |          | 绿色端子（V+) |        |          | 正极   |              |
|            |          |          | 绿色端子GND   |        |          | 正极   |              |
| 5V         |          |          | 绿色端子（V+) |        |          |        |              |
| GND        |          |          | 绿色端子GND   |        |          |        |              |

#### 

### 制作过程

#### 材料

| 名称         | 数量 | 备注 | 价格 |
| ------------ | ---- | ---- | ---- |
| Arduino Nano |      |      |      |
| Nano扩展板   |      |      |      |
| 舵机电机板   | 1    |      |      |
| 舵机         | 5    |      |      |
| 点阵模块     |      |      |      |
| 超声波传感器 | 1    |      |      |
| 杜邦线       | 若干 |      |      |
| 轮子         | 4    |      |      |
| 履带         | 30   |      |      |
| 电池盒       | 1    |      |      |
| 电池         |      |      |      |
| 螺丝         | 若干 |      |      |

#### 安装

![](http://ww4.sinaimg.cn/large/006tNc79gy1g4llxy4m33j30vk0u0n67.jpg)

1. 准备工作

- 焊接点阵模块
- nano连接扩展板

2. 参照上图安装腿部履带，宽一点的洞口是前方

3. 安装一侧履带上的两个个轮子，一个轮子的安装方法如下，其它三个一致

- 要用30cm的m3螺丝
- 头的那段，头 - 承重轮 - 垫片 - 螺母 - 垫圈 - 螺母，锁定承重轮，给承重轮空间，但又不会因为承重轮的转动而带动螺母移位
- 到身体的那段，螺母 - 垫圈 - 垫片 - 脚 - 垫片 - 垫圈 - 螺母，加垫片是尽量保持螺丝垂直于脚
- 垫圈就是一个圈，防止螺母位移。垫片就是大点的一个圈

![](http://ww4.sinaimg.cn/large/006tNc79gy1g4lm0hcxu7j31400u0npd.jpg)

4. 安装一侧履带上面对应的舵机和齿轮，然后装上履带，调节螺帽以对齐齿轮和两个承重轮

![](http://ww2.sinaimg.cn/large/006tNc79gy1g4lm252aisj30u01401ky.jpg)

5. 重复3、4步骤安装另一侧履带轮子
6. 装好轮子之后安装舵机和齿轮，加上履带之后就是这样的效果

![](http://ww2.sinaimg.cn/large/006tNc79gy1g4lm7pt2loj31400u0tdb.jpg)

7. 安装点阵模块，先把线接好把颜色记下来，例如（以下只是举例，请根据实际情况自行记录）

- CLK 黑
- CS 白
- DIN 灰
- GND 紫
- VCC 蓝

8. 把点阵上面的灯先拆下来，安装好螺丝，然后再把点阵灯装回去
9. nano接上扩展板，连接蜂鸣器，蜂鸣器塞进底部圆孔，不用太紧，方便后续安装
10. 这时可以把蜂鸣器接上扩展板，根据1.3接线对照表完成上述元件接线

**注意：舵机板绿色端子部分，先把电池盒电线插进去，然后用母对公的公头把电线压紧，不然后面组建时很容易掉**

11. 把装好的nano扩展板塞到外壳的底部，要对准底部的两个孔，一个是nano的mini-usb口，另一个是扩展板的电源口
12. 然后先装好脖子，头部和眼睛后方这几个部件：

![](http://ww1.sinaimg.cn/large/006tNc79gy1g4lm3mbghdj31400u0dj3.jpg)

![](http://ww3.sinaimg.cn/large/006tNc79gy1g4lm3ytj6dj31400u0n0v.jpg)

然后把接好线的超声波传感器装上去（这时要记住传感器针脚对应颜色，方便后续接线）

![](http://ww2.sinaimg.cn/large/006tNc79gy1g4lm4v718pj30u01400x3.jpg)

再把眼睛的前面部分安装上后完成头部的组装

![](http://ww4.sinaimg.cn/large/006tNc79gy1g4lm5id3vkj30u014041i.jpg)

**注意：脖子底部安装舵机塑料件的时候，要剪掉一部分才能够装上，如下图**

![](http://ww4.sinaimg.cn/large/006tNc79gy1g4nwdokaruj30u0140dhy.jpg)

13. 安装左右手臂的舵机

![](http://ww3.sinaimg.cn/large/006tNc79gy1g4nwecr88cj31400u042n.jpg)

- 左手臂舵机连接舵机板的 9
- 右手臂舵机连接舵机板的 7

14. 安装手臂，在手臂的孔上装上舵机塑料件，需要用点劲才能塞进去
15. 安装顶盖舵机，然后头部装稳，最后盖上顶盖

**注意：这里需要把线尽量往下塞，舵机板如下图方向塞进去，这样才有空间放顶盖的舵机**
![](http://ww2.sinaimg.cn/large/006tNc79gy1g4nwddalfbj30u0140q6j.jpg)

#### 调试

- 需要额外安装的Libraries
  - Adafruit PWM Servo Driver Library
  - LedControl

- 设置时间

![](https://ws1.sinaimg.cn/large/006tKfTcgy1g1qlmmia27j30u014kk0i.jpg)

- DS1307RTC自带设置时间的程序，直接打开编译上传便可
- 注意只需要运行一次，便不用再运行了

#### 调主程序

- 先把`//#define CALIBRATION`这句注释去掉，两个臂就会按左下->左上->右上->右下的顺序运行，并且停留时间最长(2秒)的那个点，就是左下角。根据这个情况调整舵机
- 舵机调整完之后，再重新注释掉上面那行代码，编译 -> 上传便可
- 麦克风，逆时针扭的话，是增加灵敏度，即更小声就可以触发程序

#### 模型与实物图

![](http://ww4.sinaimg.cn/large/006tNc79gy1g4c6v9xidxj30u00yh10z.jpg)



### 项目特色

#### 新颖性

- 比起模块化的产品，从虚拟到现实的过程，无疑更加好玩
- 用360°舵机来做驱动轮
  - 和减速电机、舵机相比，体积非常小，可以使瓦力保持小巧的身姿
  - 且不需要再额外增加驱动板，用一个舵机驱动板：PCA9685便可以同时驱动所有舵机
  - 扭矩也非常大，满足实际需求，使得瓦力可以爬上45°左右的斜坡
  - 一样可以调速，且比起减速电机来说，不需要再增加速度计便可精确计算行进距离

#### 先进性

- 体积非常小，内部空间运用相当紧凑

#### 实用性

- 所有的动作均可自行编程实现，灵活度很大
- PCA9685同时可以驱动16路舵机，方便日后在不修改瓦力身体尺寸的前提下，升级瓦力的手臂，使其可以抓住东西
- 这是履带式机器人的标杆设计

### 作品展望

- 瓦力的整个结构设计，很适合做搬运以及通过各种相对复杂的地形
- 留了很多改进的空间：声音识别、说话、搬运、无线控制、实时视频传输等
